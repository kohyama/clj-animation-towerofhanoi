(ns toh.core-test
  (:require [clojure.test :refer (deftest are)]
            [toh.core :refer :all]))

(deftest operations-test
  (are [src tmp dst n _ r] (= (operations src tmp dst n) r)
    :A :B :C 3 -> '([:A :C 1] [:A :B 2] [:C :B 1] [:A :C 3]
                    [:B :A 1] [:B :C 2] [:A :C 1])
    0  1  2  3 -> '([0 2 1] [0 1 2] [2 1 1] [0 2 3]
                    [1 0 1] [1 2 2] [0 2 1])))

(deftest peg-states-test
  (are [n _ r] (= (peg-states n) r)
    2 -> '([(1 2) (   ) (   )]
           [(  2) (  1) (   )]
           [(   ) (  1) (  2)]
           [(   ) (   ) (1 2)])
    3 -> '([(1 2 3) (     ) (     )]
           [(  2 3) (     ) (    1)]
           [(    3) (    2) (    1)]
           [(    3) (  1 2) (     )]
           [(     ) (  1 2) (    3)]
           [(    1) (    2) (    3)]
           [(    1) (     ) (  2 3)]
           [(     ) (     ) (1 2 3)])))

(deftest disk-states-test
  (are [n _ r] (= (disk-states n) r)
    ;     disk1 x y disk2 x y
    2 -> '({1 [ 3 2] 2 [ 3 3]}    ;               111111111
           {1 [ 3 1] 2 [ 3 3]}    ; y\x 0123456789012345678
           {1 [ 3 0] 2 [ 3 3]}    ; 0                    
           {1 [ 4 0] 2 [ 3 3]}    ; 1      |     |     |   
           {1 [ 5 0] 2 [ 3 3]}    ; 2     -|-    |     |   
           {1 [ 6 0] 2 [ 3 3]}    ; 3    --|--   |     |   
           {1 [ 7 0] 2 [ 3 3]}    ; 4   ===================
           {1 [ 8 0] 2 [ 3 3]}    ; ...
           {1 [ 9 0] 2 [ 3 3]}    ; 0     - -            
           {1 [ 9 1] 2 [ 3 3]}    ; 1      |     |     |   
           {1 [ 9 2] 2 [ 3 3]}    ; 2      |     |     |   
           {1 [ 9 3] 2 [ 3 3]}    ; 3    --|--   |     |   
           {1 [ 9 3] 2 [ 3 2]}    ; 4   ===================
           {1 [ 9 3] 2 [ 3 1]}    ; ...
           {1 [ 9 3] 2 [ 3 0]}    ; 0           - -      
           {1 [ 9 3] 2 [ 4 0]}    ; 1      |     |     |   
           {1 [ 9 3] 2 [ 5 0]}    ; 2      |     |     |   
           {1 [ 9 3] 2 [ 6 0]}    ; 3    --|--   |     |   
           {1 [ 9 3] 2 [ 7 0]}    ; 4   ===================
           {1 [ 9 3] 2 [ 8 0]}    ; ...
           {1 [ 9 3] 2 [ 9 0]}    ; 0                    
           {1 [ 9 3] 2 [10 0]}    ; 1      |     |     |   
           {1 [ 9 3] 2 [11 0]}    ; 2      |     |     |   
           {1 [ 9 3] 2 [12 0]}    ; 3    --|--  -|-    |   
           {1 [ 9 3] 2 [13 0]}    ; 4   ===================
           {1 [ 9 3] 2 [14 0]}    ; ...
           {1 [ 9 3] 2 [15 0]}    ; 0    -- --           
           {1 [ 9 3] 2 [15 1]}    ; 1      |     |     |   
           {1 [ 9 3] 2 [15 2]}    ; 2      |     |     |   
           {1 [ 9 3] 2 [15 3]}    ; 3      |    -|-    |   
           {1 [ 9 2] 2 [15 3]}    ; 4   ===================
           {1 [ 9 1] 2 [15 3]}    ; ...
           {1 [ 9 0] 2 [15 3]}    ; 0                -- --
           {1 [10 0] 2 [15 3]}    ; 1      |     |     |   
           {1 [11 0] 2 [15 3]}    ; 2      |     |     |   
           {1 [12 0] 2 [15 3]}    ; 3      |    -|-    |   
           {1 [13 0] 2 [15 3]}    ; 4   ===================
           {1 [14 0] 2 [15 3]}    ; ...
           {1 [15 0] 2 [15 3]}    ; 0                     
           {1 [15 1] 2 [15 3]}    ; 1      |     |     |   
           {1 [15 2] 2 [15 3]}))) ; 2      |     |     |   
                                  ; 3      |    -|-  --|-- 
                                  ; 4   ===================
                                  ; ...
